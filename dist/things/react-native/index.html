<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>ere.io</title><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="yes" name="mobile-web-app-capable"><meta content="yes" name="apple-mobile-web-app-capable"><link href="/manifest.json" rel="manifest"><meta content="#FEFEFE" name="theme-color"><link href="/favicon.ico" rel="shortcut icon"><link href="/bundle.dd453.css" rel="preload" as="style"><style>html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}body,html{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;width:100%;padding:0;margin:0;font-family:Source Sans Pro,sans-serif;font-size:1rem;font-weight:200;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*{box-sizing:border-box}#root{height:100%;width:100%}</style></head><body><div id="root"><div id="app"><div style="display:flex;flex-direction:column;height:100vh"><header class="header__e4qml"><nav class="nav__2GcCx"><a href="/me" class="">me</a><a href="/things" class="">things</a><a href="/me" class="icon__1pcmc"><svg height="200px" style="height:45px;width:45px;margin-left:8px;text-align:center" version="1.1" viewBox="0 0 160 200" width="160px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><undefined></undefined><title>ereio</title><desc>Created with Sketch.</desc><g fill="none" id="svg-ereio-WVa6d7V" fill-rule="evenodd" stroke="none" stroke-width="1"><g fill="#000000" id="svg-ereio-jIzEh3k" transform="translate(-381.000000, -150.000000)"><path d="M492.557789,262.562814 L454.366834,262.562814 L454.366834,188.190955 L492.557789,188.190955 L492.557789,262.562814 Z M419.190955,311.809045 L502.60804,311.809045 L502.60804,350 L419.190955,350 L419.190955,311.809045 Z M540.798995,198.241206 L540.798995,350 L502.60804,350 L502.60804,198.241206 L540.798995,198.241206 Z M381,150 L492.557789,150 L492.557789,188.190955 L419.190955,188.190955 L419.190955,350 L381,350 L381,150 Z M540.798995,150 L540.798995,188.190955 L502.60804,188.190955 L502.60804,150 L540.798995,150 Z" id="svg-ereio-3A-lUHd"></path></g></g></svg></a><a href="/blog" class="">blog</a><a href="https://github.com/ereio" native="true">github</a></nav></header><main class="main__2i_Ch"><div style="grid-area:topics/topics/topics/topics"><a href="/things/alpine" class=""><h4 class="topic__1PBsS">alpine</h4></a><a href="/things/armored-core" class=""><h4 class="topic__1PBsS">armored-core</h4></a><a href="/things/cheese" class=""><h4 class="topic__1PBsS">cheese</h4></a><a href="/things/linux" class=""><h4 class="topic__1PBsS">linux</h4></a><a href="/things/css" class=""><h4 class="topic__1PBsS">css</h4></a><a href="/things/dart-flutter" class=""><h4 class="topic__1PBsS">dart-flutter</h4></a><a href="/things/green-bunker" class=""><h4 class="topic__1PBsS">green-bunker</h4></a><a href="/things/open-drone" class=""><h4 class="topic__1PBsS">open-drone</h4></a><a href="/things/open-hardware" class=""><h4 class="topic__1PBsS">open-hardware</h4></a><a href="/things/openwrt" class=""><h4 class="topic__1PBsS">openwrt</h4></a><a href="/things/printing" class=""><h4 class="topic__1PBsS">printing</h4></a><a href="/things/psychology" class=""><h4 class="topic__1PBsS">psychology</h4></a><a href="/things/punk" class=""><h4 class="topic__1PBsS">punk</h4></a><a href="/things/react-native" class="current__8ZCrn"><h4 class="topic__1PBsS">react-native</h4></a><a href="/things/rust" class=""><h4 class="topic__1PBsS">rust</h4></a><a href="/things/uarch" class=""><h4 class="topic__1PBsS">uarch</h4></a></div><div style="grid-area:main/main/main/main"><div class="content__dqWOv"><span><h1 id="notes-on-react-native">Notes on React Native</h1><h2 id="architecture-overview">Architecture Overview</h2><br><p>Please Note: I'm using the term <strong>project</strong> instead of <strong>product</strong> here in effort to resist rhetoric that commercializes software.<br></p><p>The greatest injustice I've seen when developing web projects is the unnecessary complexity around project structure. Organizing your files by domain (or feature), instead of by function, allows your code to mirror the UI/UX and act as a proper map of features</p><pre><code>── app (or src)
   ├── assets
   ├── global
   ├── libs
   ├── store
   ├── views
   └── index.js</code></pre><p>For example, it's your first day at a new startup. Imagine you knew next to nothing about the project you're working on other than that you have users and they manage cooking recipes in the project. A manager asks you to "change the profile section to look like facebook". Which file structure would help you get started the fastest?</p><h3 id="by-domain">By Domain</h3><pre><code>── app (or src)
   ├── assets
   ├── global
   ├── libs
   ├── store
   │   ├── auth 
   │   ├── recipes 
   │   ├── settings 
   │   └── user 
   │       ├── actions.js 
   │       ├── reducer.js 
   │       └── state.js 
   ├── views
   │   ├── recipes 
   │   └── user 
   │       ├── profile
   │       │   └── index.js (*)
   │       └── index.js 
   └── index.js</code></pre><h3 id="by-function-type">By Function (Type)</h3><pre><code>── app (or src)
   ├── assets
   ├── styles
   ├── utils
   ├── components
   │   └── user 
   │       ├── UserComponent.js
   │       └── profile
   │           └── UserProfileComponent.js
   ├── pages
   │   └── user
   │       └── profile
   │           └── ProfilePage.js
   ├── routes
   │   └── user
   │       └── profile
   │           └── UserRoute.js
   ├── redux
   ├── index.android.js
   ├── index.ios.js 
   ...</code></pre><p>While preference is subjective, I've onboarded new team members on projects with both, but I've had them deploying faster when structuring 'by domain'.</p><p>Offloading the cognitive map of the project to the file structure prevents developers from relying solely on UML or diagrams that structure the flow of the project. The file structure acts as a map to the UI and even the domain logic contained within. You may have observed that the <code>by domain</code> example seemingly has a top layer of <code>by function</code> structure. Viewing the project with higher architectural scope allows you to view the 'store' and 'views' as feature sets. Many projects do not have explicit UI/UX (CLI tools or API's) or use a 'store' for handling immutable state (potentially API's). Instead, they may be labeled as 'output' but still contain a 'store' to manage state.</p><hr><h2 id="ui-libraries">UI Libraries</h2><h3 id="react-native-paper"><a href="https://callstack.github.io/react-native-paper/getting-started.html">react-native-paper</a></h3><ul><li>Minimally styled components</li><li>Easy to override styling</li></ul><h3 id="native-base-not-recommended"><a href="">native-base</a> (not recommended)</h3><ul><li>Heavily opinionated styling</li><li>Absolute positioning on elements makes it hard to layout</li><li>Overriding styling is sometimes not possible</li><li>Bloated theming</li></ul><hr><h2 id="domain-logic">Domain Logic</h2><h3 id="helpful-commands">Helpful Commands</h3><pre class="language-bash"><code class="language-bash"><span class="token comment"># android</span>
emulator -list-avds
emulator -avd <span class="token operator">&lt;</span>id<span class="token operator">></span>

<span class="token comment"># ios</span>
xcrun simctl delete unavailable
xcrun simctl list devices
xcrun simctl boot <span class="token operator">&lt;</span>id<span class="token operator">></span>

<span class="token comment">## record</span>
xcrun simctl io booted recordVideo <span class="token operator">&lt;</span>filename<span class="token operator">></span>.<span class="token operator">&lt;</span>extension<span class="token operator">></span></code></pre><hr><h3 id="other">Other</h3><ul><li><a href="https://github.com/react-native-training/react-native-fonts">dealing with fonts</a></li><li><a href="https://facebook.github.io/react-native/docs/pixelratio.html">using proportions and ratios</a> instead of static px values</li></ul><h3 id="tips">Tips</h3><details><summary>Absolute Import Paths</summary><p></p><pre><code>module.exports = {
  presets: ['module:metro-react-native-babel-preset', 'module:react-native-dotenv'],
  plugins: [
    ['module-resolver', {
      alias: {
        app: './app',
      }
    }]
  ]
};</code></pre><p></p></details><h3 id="tricks">Tricks</h3><details><summary>Custom iOS Back</summary><p></p><pre class="language-jsx"><code class="language-jsx">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TouchableOpacity</span></span>
    <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>navigation<span class="token punctuation">.</span><span class="token function">getParam</span><span class="token punctuation">(</span><span class="token string">'onNavigateBack'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> flexDirection<span class="token operator">:</span> <span class="token string">'row'</span><span class="token punctuation">,</span> alignItems<span class="token operator">:</span> <span class="token string">'center'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token operator">:</span> navColors<span class="token punctuation">.</span>appleBlue<span class="token punctuation">,</span> paddingTop<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> fontSize<span class="token operator">:</span> <span class="token number">34</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>ios-arrow-back<span class="token punctuation">'</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token operator">:</span> navColors<span class="token punctuation">.</span>appleBlue<span class="token punctuation">,</span> paddingLeft<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> fontSize<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">></span></span><span class="token plain-text">Back</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TouchableOpacity</span></span><span class="token punctuation">></span></span></code></pre><p></p></details><br><details><summary>Hidden UI Blocking Layer</summary><p></p><pre class="language-jsx"><code class="language-jsx">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TouchableWithoutFeedback</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onForceLinkAlert<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
              position<span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>
              elevation<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
              right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              height<span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>
              width<span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>
              opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
              backgroundColor<span class="token operator">:</span> colors<span class="token punctuation">.</span>primary<span class="token punctuation">,</span>
              borderColor<span class="token operator">:</span> colors<span class="token punctuation">.</span>primary<span class="token punctuation">,</span>
              borderWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
              borderRadius<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
              zIndex<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TouchableWithoutFeedback</span></span><span class="token punctuation">></span></span></code></pre><p></p></details></span></div></div></main></div></div></div><link href="/bundle.dd453.css" rel="stylesheet"></body></html>